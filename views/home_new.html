{% extends "base.html" %}
{% import '_snippets.html' as snippets %}

{% block title %}
Welcome - Home
{% endblock %}

{% block bodyclass %}home{% endblock %}

{% block content %}
<!-- Jumbotron main -->
<div class="container">
  <div class="inner_container">
    <div class="jumbotron jumbotron-primary">
      <div class="row">
        <div class="text-center">
          <h1 class="main-title">Data online made simple</h1>
        </div>
      </div>
      <div class="row demo">
        <div class="col-sm-6">
          <div class="console">
            <div class="window">
              <div class="header">
                <span class="icon close-terminal"></span>
                <span class="icon minimize"></span>
                <span class="icon fullScreen"></span>
                <div class="title">
                  bash
                </div>
              </div>
              <div class="body">
                <div class="console-inner">
                  <pre>
<span class="prompt"><span class="square">■</span> ~/my-data $ <span
class="txt-show"
data-start="2000"
data-text='ls'></span><span class="cursor"></span>
</span><span class="output" style="display:none">   data.csv</span><span
class="prompt" style="display:none"><span class="square">■</span> ~/my-data $ <span
class="txt-show"
data-start="4500"
data-text='data push data.csv'></span><span class="cursor"></span>
</span><span
class="prompt" style="display:none">   &gt; Uploading <span
class="txt-show" data-start="12500" data-text="..................."></span> <span class="output" style="display:none">100% 8.5s</span>
</span><span
class="output" style="display:none">   &gt; Push complete (9.61MB) [8509ms]
   &gt; Ready! https://datahub.io/your-username/my-data
     (copied to clipboard)
</span><span
class="prompt" style="display:none"><span class="square">■</span> ~/my-data $ <span class="cursor"></span></span>
                  </pre>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-sm-6">
          <div class="primary-call-to-action">
            <a href="/core" class="btn btn-lg btn-default btn-block">
              Core datasets
            </a>
            <a href="/requests" class="btn btn-lg btn-default btn-block">
              Request data
            </a>
            <a href="/download" class="btn btn-lg btn-primary btn-block">
              Start publishing for free!
            </a>
          </div>
        </div>
      </div>
      <p class="info"><span style="font-size: 100%; font-family: monospace">❒</span> <strong>datahub</strong> is the fastest way for individuals and teams to <strong>find, share and publish</strong> high quality data online</p>
      <div class="row text-center call-to-action call-to-action-new">
        <div>
          <a href="#showcase" class="arrow" onclick="scrollDown(this)">
            <i class="fa fa-angle-down" aria-hidden="true"></i>
          </a>
        </div>
      </div>
    </div>
  </div>
</div><!-- End of jumbotron main -->

<!-- Section 1 -->
<div class="section-gray" id="showcase">
<div class="container home">
  <div class="inner_container">
    <div class="section section-centered">
      <div class="row">
        <h2 class="section-title">Some of our most popular data</h2>

        {{ snippets.package_list_show(showcasePackages) }}

        <a href="/search" class="btn btn-lg btn-primary">
          See more datasets
        </a>
      </div>
    </div>
  </div>
</div>
</div><!-- End of section 1 -->
{% endblock %}

{% block scripts %}
<!-- script for animation of terminal -->
<script>
  var TxtRotate = function(el, text, start) {
    this.text = text;
    this.el = el;
    this.delay = parseInt(start);
    this.txt = '';
    var that = this;
    setTimeout(function(){
      that.tick();
    }, that.delay);
  };

  TxtRotate.prototype.tick = function() {
    var prompts = document.getElementsByClassName('prompt');
    var cursors = document.getElementsByClassName('cursor');
    var fullTxt = this.text;

    this.txt = fullTxt.substring(0, this.txt.length + 1);

    this.el.innerHTML = '<span class="wrap">'+this.txt+'</span>';

    var that = this;
    var delta = 300 - Math.random() * 100;

    setTimeout(function() {
      that.tick();
    }, delta);

    setTimeout(function() {
      if (that.txt === fullTxt) {
        var outputs = document.getElementsByClassName('output')
        if (fullTxt === 'ls') {
          cursors[0].style.display = 'none';
          outputs[0].style.display = 'block';
          prompts[1].style.display = 'block';
        } else if (fullTxt === 'data push data.csv') {
          cursors[1].style.display = 'none';
          prompts[2].style.display = 'block';
        } else if (fullTxt.includes('...')) {
          outputs[1].style.display = 'inline-block';
          outputs[2].style.display = 'block';
          prompts[3].style.display = 'block';
        }
      }
    }, 2000);
  };

  window.onload = function() {
    var elements = document.getElementsByClassName('txt-show');
    for (var i=0; i<elements.length; i++) {
      var start = elements[i].getAttribute('data-start');
      var text = elements[i].getAttribute('data-text');
      if (text) {
        new TxtRotate(elements[i], text, start);
      }
    }
  };
</script>
{% endblock %}
